<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="modalDeletar" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
			<h5 class="modal-title" id="modalDeletar">DIETA</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			</div>
			<div class="modal-body" id="dieta-modal">
			</div>
			<div class="modal-footer">
			<button type="button" class="btn btn-success" data-dismiss="modal">Ok</button>					
			</div>
		</div>
	</div>
</div>

{{#each dados}}			
<div class="container-form">
	<h2 class="title-form">Preencha todas informações abaixo:</h2>
	<form action="/insertAlimentacao" method="POST" class="form-style" role="form">
		<div class="box-body">
			<div class="form-group">
				<div class="forms-campo">
					<label for="brinco" class="form-label">Brinco do gado*</label>
					<input type="text" class="form-text campo-bloqueado" id="codgado" name="codgado" value="{{brinco}}" readonly>
				</div>
				<div class="forms-campo">
					<label for="nome" class="form-label">Nome do Gado*</label>
					<input type="text" class="form-text campo-bloqueado" id="nomegado" name="nomegado" value="{{nome}}" required="">
				</div>
			</div>
			<div class="row">
				<div class="col-md-8">
					<div class="forms-campo">
						<label for="codalimento" class="form-label">Alimentos*</label>
						<select class="form-control select2 select2-hidden-accessible" style="width: 100%;" tabindex="-1" aria-hidden="true" name="codalimento"
						 id="select-alimento">
						</select>
					</div>
				</div>
				<div class="col-md-4">
					<div class="forms-campo">
						<label for="quantidadeAlimentacao" class="form-label">Quantidade*</label>
						<input type="number" class="form-control" name="quantidadeAlimentacao" id="quantidadeAlimentacao" required="">
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-8">
					<div class="forms-campo">
						<label for="codsuplemento" class="form-label">Suplementos*</label>
						<select class="form-control select2 select2-hidden-accessible" style="width: 100%;" tabindex="-1" aria-hidden="true" name="codsuplemento"
						 id="select-suplemento">
						</select>
					</div>
				</div>
				<div class="col-md-4">						
					<div class="forms-campo">
						<label for="quantidadeSuplemento" class="form-label">Quantidade*</label>
						<input type="text" class="form-control" name="quantidadesuplemento" id="quantidadeSuplemento"></select>
					</div>
				</div>
			</div>
			{{/each}}
			<hr>
			<input type="submit" name="Cadastrar" class="button sucess">
		</div>
	</form>
</div>
{{#extend "js"}}
<script type="text/javascript" src="../js/select2.full.min.js"></script>
<script>
	$(document).ready(function () {
			//Initialize Select2 Elements
		$('.select2').select2();

		$("#myModal").modal();

		$.ajax({
			method: "POST",
			url: "/dietaGado",
			data: {"brinco": $("#codgado").val()},
			success: data => {
				$("#dieta-modal").html(data);
			}
		})


		$.get("/dadosAlimentos", data => {
			let option = [];
			data.forEach(alimento => {
				option.push(`<option name="codalimento" value="${alimento.id}">${alimento.nome}</option>"`);
			});
			$("#select-alimento").append(option);
		});
		const selectalimento = document.querySelector("#select-alimento");
		selectalimento.addEventListener('click', (e) => {

		});

		$.get("/dadosSuplementos", data => {
			let option = [];
			data.forEach(suplemento => {
				option.push(`<option name="codsuplemento" value="${suplemento.id}">${suplemento.nome}</option>"`);
			});
			$("#select-suplemento").append(option);
		});
		const selectsuplemento = document.querySelector("#select-suplemento");
		selectsuplemento.addEventListener('click', (e) => {

		});
	});
</script>
{{/extend}}