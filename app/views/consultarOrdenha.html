<div class="row">
  <div class="col-md-3 col-sm-6 col-xs-12">
    <div class="info-box" id="box-countLeite">
      <span class="info-box-icon bg-aqua"><i class="fa fa-asterisk" aria-hidden="true" ></i></span>
      <div class="info-box-content">
        <span class="info-box-text">Litros de Leite</span>
        <span class="info-box-number" id="countLeite"></span>
      </div>
    </div>
  </div>
  <a href="/cadastrarOrdenha"><span class="info-box-icon bg-green"><i class="fa fa-plus" aria-hidden="true"></i></span></a>
  <div class="col-md-3 col-sm-6 col-xs-12">
    <div class="form-group">  
      <div class="input-group date">
        <div class="input-group-addon">
          <i class="fa fa-calendar"></i>
        </div>
        
        <input type="text" class="form-control pull-right" name="daterange" value="01/01/2015 - 01/31/2015" />
        
      </div>  
      </div>
  </div>
</div>

 <div class="form-group input-group">
  <span class="input-group-addon"><i class="fa fa-search"></i></span>
  <input name="consulta" id="txt_consulta" placeholder="Consultar" type="text" class="form-control">
</div>

<table id="tabela" class="table table-hover">
  <thead>
    <tr>
      <th>Id</th>
      <th>Brinco</th>
      <th>Nome</th>
      <th>Litros de leite</th>
      <th>Data</th>
    </tr>
  </thead>
  <tbody>
    {{#each dados}}
    <tr data-id="/alterarOrdenha/{{id}}" class="item-edit">
      <td>{{id}}</td>
      <td>{{brinco}}</td>
      <td>{{nome}}</td>
      <td>{{litrosleite}}</td>
      <td>{{data}}</td>
    </tr>
    {{/each}}
  </tbody>
</table>

{{#extend "js"}}
<script>

  $('input[name="daterange"]').daterangepicker(
{
    locale: {
      format: 'DD-MM-YYYY'
    },
    startDate: '01-01-2018',
    endDate: '30-01-2018'
}, 
function(start, end, label) {
    alert("A new date range was chosen: " + start.format('DD-MM-YYYY') + ' to ' + end.format('DD-MM-YYYY'));
});

  $('input#txt_consulta').quicksearch('table#tabela tbody tr');

  function htmlInsert(countLeite) {
    $("#countLeite").html('' + countLeite);
  };

  $(document).ready(function () {

    $.get("/readOrdenha", data => {

      let countLeite = 0;

      data.forEach(elem => {
        countLeite += parseFloat(elem.litrosleite);
      });

      $.get("/readPedidos", data => {

        let countLeiteNegativo = 0;

        data.forEach(elem => {
          countLeiteNegativo += parseFloat(elem.quantidadelitros);
        });
        let valor = countLeite - countLeiteNegativo;      
        htmlInsert(valor);
      });
    });
  });

</script>
{{/extend}}